{% extends "shoppinginclude/base.html" %}
{% load carton_tags %}
{% load static %}

{% block javascript %}
  {{ block.super }}
  <script src="{% static 'js/tooltip.js' %}"></script>
{% endblock %}

{% block main %}
  {% get_cart as cart %}
  
  {% if cart.items %}
    <div class="cart-container">
      {% include "shoppinginclude/tables/cart.html" %}
    </div>
    <form action="{% url 'shopping_charge' %}" method="POST">
      {% csrf_token %}
      <script
        src="https://checkout.stripe.com/checkout.js" class="stripe-button"
        data-key="{{ STRIPE_PUBLIC_KEY }}"
        data-name="Serendipity"
        data-description="2 widgets ($20.00)"
        data-amount="2000">
      </script>
    </form>
  {% else %}
    <div class="well">
      <div class="text-block text-center">
        <p>You don't have any items in your cart! View some items and add them to your cart.</p>
        <a href="{% url 'product_home' %}" class="btn btn-primary btn-lg">Our Products  <span class="glyphicon glyphicon-chevron-right"></span></a>
      </div>
    </div>
  {% endif %}
{% endblock %}